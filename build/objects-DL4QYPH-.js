import{r as k,eP as F,eQ as v,eR as T,eS as U}from"./strapi-y0akA7lV.js";const Q={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation",BLOCKS:"blocks"},V=(r,s,{onCancel:f,onDropItem:i,onGrabItem:n,onMoveItem:t})=>{const[a,u]=k.useState(!1),g=o=>{a&&typeof s=="number"&&t&&(o==="UP"?t(s-1,s):o==="DOWN"&&t(s+1,s))},d=()=>{a?(i&&i(s),u(!1)):(n&&n(s),u(!0))},A=()=>{a&&(u(!1),f&&f(s))};return o=>{if(r&&!(o.key==="Tab"&&!a))switch(o.preventDefault(),o.key){case" ":case"Enter":d();break;case"Escape":A();break;case"ArrowDown":case"ArrowRight":g("DOWN");break;case"ArrowUp":case"ArrowLeft":g("UP");break}}},L={UPWARD:"upward",DOWNWARD:"downward"},N={REGULAR:"regular"},x=(r,{type:s="STRAPI_DND",index:f,item:i,onStart:n,onEnd:t,onGrabItem:a,onDropItem:u,onCancel:g,onMoveItem:d,dropSensitivity:A=N.REGULAR})=>{const O=k.useRef(null),[{handlerId:o,isOver:P},W]=F({accept:s,collect(e){return{handlerId:e.getHandlerId(),isOver:e.isOver({shallow:!0})}},drop(e){const D=e.index;P&&u&&u(D,f)},hover(e,D){if(!O.current||!d)return;const c=e.index,l=f,w=O.current?.getBoundingClientRect(),R=(w.bottom-w.top)/2,p=D.getClientOffset();if(!p)return;const y=p&&p.y-w.top;if(typeof c=="number"&&typeof l=="number"){if(c===l||A===N.REGULAR&&(c<l&&y<R||c>l&&y>R))return;d(l,c),e.index=l}else{if(Array.isArray(c)&&Array.isArray(l)){const _=Math.min(c.length,l.length);let I=!0,C=!1,E=!1;for(let h=0;h<_;h++)if(c[h]<l[h]){C=!0,I=!1;break}else if(c[h]>l[h]){E=!0,I=!1;break}if(I&&c.length===l.length||A===N.REGULAR&&(C&&!E&&y<R||E&&!C&&y>R))return}d(l,c),e.index=l}}}),b=e=>{if(e&&e.isDragging()&&!e.didDrop()&&e.getInitialClientOffset()&&e.getClientOffset()){const D=e.getInitialClientOffset().y-e.getClientOffset().y;return D>0?L.UPWARD:D<0?L.DOWNWARD:null}return null},[{isDragging:S,direction:K},Y,B]=v({type:s,item(){n&&n();const{width:e}=O.current?.getBoundingClientRect()??{};return{index:f,width:e,...i}},end(){t&&t()},canDrag:r,isDragging:i?.id?e=>i.id===e.getItem().id:void 0,collect:e=>({isDragging:e.isDragging(),initialOffset:e.getInitialClientOffset(),currentOffset:e.getClientOffset(),direction:b(e)})}),G=V(r,f,{onGrabItem:a,onDropItem:u,onCancel:g,onMoveItem:d});return[{handlerId:o,isDragging:S,handleKeyDown:G,isOverDropTarget:P,direction:K},O,W,Y,B]};function Z(r,s,f,i=0){const n=U(s);for(;r&&i<n.length;)r=r[n[i++]];return i!==n.length&&!r||r===void 0?f:r}const q=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),H=r=>String(Math.floor(Number(r)))===r;function z(r,s,f){const i=T(r);let n=i,t=0;const a=U(s);for(;t<a.length-1;t++){const u=a[t],g=Z(r,a.slice(0,t+1));if(g&&(q(g)||Array.isArray(g)))n=n[u]=T(g);else{const d=a[t+1];n=n[u]=H(d)&&Number(d)>=0?[]:{}}}return(t===0?r:n)[a[t]]===f?r:(delete n[a[t]],t===0&&f===void 0&&delete i[a[t]],i)}export{L as D,Q as I,N as a,Z as g,z as s,x as u};
