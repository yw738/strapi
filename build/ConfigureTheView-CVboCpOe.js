import{u as y,j as e,c6 as I,bK as c,bN as d,ej as o,cr as b,fO as O,cs as x,fP as T,fQ as u,e3 as $,fR as F,eg as H,s as z,a as B,fS as W,r as j,L as g,d as _,bJ as G,ei as q,bl as P,dq as U,cd as J,bA as K,D as Q,C as V}from"./strapi-y0akA7lV.js";const Y=({sort:i="",pageSize:a=10,onChange:t})=>{const{formatMessage:n}=y();return e.jsx(I,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:e.jsxs(c.Root,{gap:4,children:[e.jsx(c.Item,{s:12,col:6,direction:"column",alignItems:"stretch",children:e.jsxs(d.Root,{hint:n({id:o("config.entries.note"),defaultMessage:"Number of assets displayed by default in the Media Library"}),name:"pageSize",children:[e.jsx(d.Label,{children:n({id:o("config.entries.title"),defaultMessage:"Entries per page"})}),e.jsx(b,{onChange:s=>t({target:{name:"pageSize",value:s}}),value:a,children:O.map(s=>e.jsx(x,{value:s,children:s},s))}),e.jsx(d.Hint,{})]})}),e.jsx(c.Item,{s:12,col:6,direction:"column",alignItems:"stretch",children:e.jsxs(d.Root,{hint:n({id:o("config.note"),defaultMessage:"Note: You can override this value in the media library."}),name:"sort",children:[e.jsx(d.Label,{children:n({id:o("config.sort.title"),defaultMessage:"Default sort order"})}),e.jsx(b,{onChange:s=>t({target:{name:"sort",value:s}}),value:i,"test-sort":i,"data-testid":"sort-select",children:T.map(s=>e.jsx(x,{"data-testid":`sort-option-${s.value}`,value:s.value,children:n({id:o(s.key),defaultMessage:`${s.value}`})},s.key))}),e.jsx(d.Hint,{})]})})]})})},D=`${u}/ON_CHANGE`,v=`${u}/SET_LOADED`,X=({name:i,value:a})=>({type:D,keys:i,value:a}),Z=()=>({type:v}),f={initialData:{},modifiedData:{}},S=i=>({...f,initialData:i,modifiedData:i}),ee=(i=f,a={type:""})=>$(i,t=>{switch(a.type){case D:{"keys"in a&&"value"in a&&a.keys&&H(t,["modifiedData",...a.keys.split(".")],a.value);break}case v:{const n=S(F(t,["modifiedData"],{}));t.initialData=n.initialData,t.modifiedData=n.modifiedData;break}default:return t}}),te=({config:i})=>{const{trackUsage:a}=z(),{formatMessage:t}=y(),{toggleNotification:n}=B(),{mutateConfig:s}=W(),{isLoading:C}=s,[M,h]=j.useState(!1),m=()=>h(r=>!r),[k,L]=j.useReducer(ee,f,()=>S(i)),p=L,{initialData:w,modifiedData:l}=k,R=r=>{r.preventDefault(),m()},E=async()=>{a("willEditMediaLibraryConfig"),await s.mutateAsync(l),h(!1),p(Z()),n({type:"success",message:t({id:"notification.form.success.fields",defaultMessage:"Changes saved"})})},N=({target:{name:r,value:A}})=>{p(X({name:r,value:A}))};return e.jsx(g.Root,{children:e.jsx(_.Main,{"aria-busy":C,children:e.jsxs("form",{onSubmit:R,children:[e.jsx(g.Header,{navigationAction:e.jsx(U,{tag:J,startIcon:e.jsx(K,{}),to:`/plugins/${u}`,id:"go-back",children:t({id:o("config.back"),defaultMessage:"Back"})}),primaryAction:e.jsx(G,{size:"S",startIcon:e.jsx(P,{}),disabled:q(l,w),type:"submit",children:t({id:"global.save",defaultMessage:"Save"})}),subtitle:t({id:o("config.subtitle"),defaultMessage:"Define the view settings of the media library."}),title:t({id:o("config.title"),defaultMessage:"Configure the view - Media Library"})}),e.jsx(g.Content,{children:e.jsx(Y,{"data-testid":"settings",pageSize:l.pageSize||"",sort:l.sort||"",onChange:N})}),"x",e.jsx(Q.Root,{open:M,onOpenChange:m,children:e.jsx(V,{onConfirm:E,variant:"default",children:t({id:o("config.popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"})})})]})})})};export{te as ConfigureTheView};
