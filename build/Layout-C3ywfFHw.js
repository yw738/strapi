const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["strapi-y0akA7lV.js","strapi-B5podyrr.css"])))=>i.map(i=>d[i]);
import{r as g,cj as _,et as w,bT as T,J as A,eu as D,d5 as C,bS as O,u as E,s as U,ck as B,j as i,ev as R,ew as G,ex as H,ey as K,cd as $,o as M,ez as V,eA as z,ce as F,d as j,cl as J,L as W,eB as Y}from"./strapi-y0akA7lV.js";import{s as q}from"./sortBy-DtDgK6J3.js";import{s as Q}from"./selectors-BND_oPzQ.js";import"./_baseMap-hh6JGYGa.js";import"./_baseEach-G4a-WJLT.js";const X=n=>n.map(a=>{const l=a.links.map(r=>({...r,isDisplayed:!1}));return{...a,links:l}}),Z=()=>{const[{isLoading:n,menu:a},l]=g.useState({isLoading:!0,menu:[]}),r=_("useSettingsMenu",s=>s.checkUserHasPermissions),b=w("useSettingsMenu",s=>s.shouldUpdateStrapi),m=T("useSettingsMenu",s=>s.settings),u=A(Q),f=g.useMemo(()=>D(),[]),{admin:t,global:e}=C(f,async()=>(await O(async()=>{const{SETTINGS_LINKS_EE:s}=await import("./strapi-y0akA7lV.js").then(o=>o.jb);return{SETTINGS_LINKS_EE:s}},__vite__mapDeps([0,1]))).SETTINGS_LINKS_EE(),{combine(s,o){return{admin:[...o.admin,...s.admin],global:[...s.global,...o.global]}},defaultValue:{admin:[],global:[]}}),h=g.useCallback(s=>{if(!s.id)throw new Error("The settings menu item must have an id attribute.");return{...s,permissions:u.settings?.[s.id]?.main??[]}},[u.settings]);return g.useEffect(()=>{const s=async()=>{const I=await(S=>Promise.all(S.reduce((d,L,k)=>{const x=L.links.map(async(v,p)=>({hasPermission:(await r(v.permissions)).length>0,sectionIndex:k,linkIndex:p}));return[...d,...x]},[])))(N);l(S=>({...S,isLoading:!1,menu:N.map((d,L)=>({...d,links:d.links.map((k,x)=>{const v=I.find(p=>p.sectionIndex===L&&p.linkIndex===x);return{...k,isDisplayed:!!v?.hasPermission}})}))}))},{global:o,...y}=m,N=X([{...o,links:q([...o.links,...e.map(h)],c=>c.id).map(c=>({...c,hasNotification:c.id==="000-application-infos"&&b}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:t.map(h)},...Object.values(y)]);s()},[t,e,m,b,h,r]),{isLoading:n,menu:a.map(s=>({...s,links:s.links.filter(o=>o.isDisplayed)}))}},P=M(V)`
  right: 15px;
  position: absolute;
  bottom: 50%;
  transform: translateY(50%);

  path {
    fill: ${({theme:n})=>n.colors.warning500};
  }
`,ss=M(z)`
  &.active ${P} {
    right: 13px;
  }
`,es=({menu:n})=>{const{formatMessage:a}=E(),{trackUsage:l}=U(),{pathname:r}=B(),m=n.filter(t=>!t.links.every(e=>e.isDisplayed===!1)).map(t=>({...t,title:t.intlLabel,links:t.links.map(e=>({...e,title:e.intlLabel,name:e.id}))})),u=a({id:"global.settings",defaultMessage:"Settings"}),f=t=>()=>{l("willNavigate",{from:r,to:t})};return i.jsxs(R,{"aria-label":u,children:[i.jsx(G,{label:u}),i.jsx(H,{children:m.map(t=>i.jsx(K,{label:a(t.intlLabel),children:t.links.map(e=>i.jsxs(ss,{tag:$,withBullet:e.hasNotification,to:e.to,onClick:f(e.to),position:"relative",children:[a(e.intlLabel),e?.licenseOnly&&i.jsx(P,{width:"1.5rem",height:"1.5rem"})]},e.id))},t.id))})]})},rs=()=>{const n=F("/settings/:settingId/*"),{formatMessage:a}=E(),{isLoading:l,menu:r}=Z();return l?i.jsx(j.Loading,{}):n?.params.settingId?i.jsxs(W.Root,{sideNav:i.jsx(es,{menu:r}),children:[i.jsx(j.Title,{children:a({id:"global.settings",defaultMessage:"Settings"})}),i.jsx(Y,{})]}):i.jsx(J,{to:"application-infos"})};export{rs as Layout};
